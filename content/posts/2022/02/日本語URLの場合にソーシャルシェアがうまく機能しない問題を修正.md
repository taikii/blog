---
title: "日本語URLの場合にソーシャルシェアがうまく機能しない問題を修正"
date: 2022-02-14T00:12:00+09:00
tags: ["Hugo", "Whiteplain"]
---

この記事のようにURLが日本語が含まれる場合…というか、URLエンコードが必要なURLの場合、ソーシャルシェアリンクがうまく機能しない問題がありました。

<!--more-->

要は、二重でパーセントエンコードをかけないといけなかったんですが、 `safeURL` ではすでにURLエンコードされているものをもう一度エンコードするようなことはしないため、TwitterでシェアしようとするときにURLが日本語になってしまい、リンクとして機能していませんでした。

力技ですが `%` を `%25` に置換することでこの問題を対処しています。

https://github.com/taikii/whiteplain/pull/27/files#diff-cff5643934dce8ade80e9bb35ca4483dc01dc8f4d53f7b59a6f429db5cdbac2cL12

ついでにサンプルサイトも最新のものに置き換えました。

頑張って英語っぽいURLを考えるのが疲れてしまい…それでたまたま発覚したんですよね…

英語勉強したいなぁ…
