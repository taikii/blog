---
title: "Redmine 5.0 のメンション機能を検証"
date: 2022-09-29T00:22:13+09:00
tags: ["Redmine"]
---

Redmine 5.0 で組み込まれた待望のメンション機能を検証します。

<!--more-->

Wikiをゴリゴリアップデートしている途中で「@username」がリンクになっていることに気づき、「これもしかしてメール飛んじゃってんじゃね！？」とドキドキしたので検証してみることにしました。

まず、メンションによりメールが送信されるのは、以下の2つの条件をクリアしたときにのようです。

1. 管理＞設定＞メール通知 で該当の機能のメール通知が有効になっている。
2. 該当データにメンションを追加したとき。

1つ目の条件わかりやすいですね。私の場合は、Wikiの更新は通知がOFFになっていたのでメールは送信されていませんでした。よかったよォ…

2つ目の条件は少し複雑です。例えば「チケットの更新」がメール通知対象になっているとして、

* チケットの説明欄に「@username」を追加するとメール送信されます。
* チケットの説明欄に「@username」がすでに記入されている状態で、説明欄の文言を修正してもメール送信されません。
* チケットの説明欄に「@username」がすでに記入されている状態で、「@username」を更に追加（「@username @username」）してもメール送信されません。
* チケットの説明欄から「@username」を削除してもメール送信されません。
* チケットの説明欄から「@username」を削除したあと、もう一度「@username」を追加するとメール送信されます。

Wikiも同様ですが、さらにWikiの場合はセクション単位で編集できます。このセクション単位の編集の場合、

* 編集中のセクションに「@username」を追加したとしても、別のセクションに「@username」がすでに記入されているとメール送信されません。

## メンション機能の今後に期待

Redmineのメンションはメール通知を促すだけのものなので、揮発性の高い情報です。他のメンションを持つシステムは「通知」を管理する機能も合わせ持つものが多いように思います。メンションを含め、自分宛ての通知の一覧をRedmine内で確認できるようになると、メンションの価値も高まるんじゃないでしょうか。ただ、オンプレを前提としたRedmineで通知データを管理するのは扱うデータ量の問題で賛否ありそう。

あと、メールが多くなりがちなのでチケットコメントの追加はメール通知対象にしていないんですが、メンションした場合はメール通知されてほしいなと思いました。管理＞設定＞メール通知 の設定がON/OFFではなくて「○すべて通知　○メンションのみ　○通知しない」のラジオボタンであればいいんでしょうかね。メール通知の条件が複雑になると、どういう場合にメール通知されるのか、利用者が確認できる画面も必要だろうなぁ。

これまでサードパーティ製のメンションプラグインはありましたが、バージョンアップの度に動かなくなったりしていたので、コアの機能として組み込まれたことは大変嬉しいです。関係した皆様ありがとうございます。

※間違ってたらすみません。
